# ğŸ” Face Detection Chatbot

**CCTV/ë‹¨ì²´ ì‚¬ì§„ì—ì„œ ì–¼êµ´ì„ ê°ì§€í•˜ê³ , ì„±ë³„ê³¼ ì—°ë ¹ëŒ€ë¥¼ ë¶„ì„í•˜ì—¬ ìì—°ì–´ë¡œ ì§ˆì˜ì‘ë‹µí•˜ëŠ” ì‹œìŠ¤í…œ**

[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://python.org)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.109+-green.svg)](https://fastapi.tiangolo.com)
[![React](https://img.shields.io/badge/React-18+-61DAFB.svg)](https://react.dev)
[![OpenAI](https://img.shields.io/badge/OpenAI-GPT--4o--mini-412991.svg)](https://openai.com)

---

## ğŸ“‹ ëª©ì°¨

- [ê°œìš”](#-ê°œìš”)
- [ì•„í‚¤í…ì²˜](#-ì•„í‚¤í…ì²˜)
- [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
- [ì„¤ì¹˜ ë°©ë²•](#-ì„¤ì¹˜-ë°©ë²•)
- [ì‚¬ìš©ë²•](#-ì‚¬ìš©ë²•)
- [API ë¬¸ì„œ](#-api-ë¬¸ì„œ)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)

---

## ğŸ¯ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” ì´ë¯¸ì§€ ë¶„ì„ê³¼ LLMì„ ê²°í•©í•œ ëŒ€í™”í˜• ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### í•µì‹¬ ì›ì¹™

âŒ **LLMì´ ì´ë¯¸ì§€ë¥¼ ì§ì ‘ ë³´ê³  ì¹´ìš´íŒ…** (ë¶ˆì•ˆì •, Hallucination ìœ„í—˜)

âœ… **ë¹„ì „ íŒŒì´í”„ë¼ì¸ â†’ JSON â†’ LLMì´ JSON ê¸°ë°˜ ë‹µë³€** (ì •í™•ë„ 100%)

### ì£¼ìš” ê¸°ëŠ¥

- ğŸ“· **ì–¼êµ´ ê°ì§€**: YOLOv8 ê¸°ë°˜ ì‹¤ì‹œê°„ ì–¼êµ´ ê²€ì¶œ
- ğŸ‘« **ì„±ë³„ ë¶„ë¥˜**: ViT ê¸°ë°˜ ë‚¨/ì—¬ ë¶„ë¥˜
- ğŸ‚ **ì—°ë ¹ëŒ€ ì¶”ì •**: 10ëŒ€/20ëŒ€/30ëŒ€/40ëŒ€+ ë¶„ë¥˜
- ğŸ’¬ **ìì—°ì–´ ì§ˆì˜**: GPT-4o-mini ê¸°ë°˜ ëŒ€í™”í˜• ì¸í„°í˜ì´ìŠ¤

---

## ğŸ— ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend (React + Vite)                   â”‚
â”‚        ì´ë¯¸ì§€ ì—…ë¡œë“œ â”‚ ë¶„ì„ ê²°ê³¼ ì‹œê°í™” â”‚ ì±—ë´‡ UI            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend (FastAPI)                         â”‚
â”‚  /upload â†’ /analyze â†’ /result â†’ /chat                        â”‚
â”‚                            â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Storage (SQLite)                    â”‚  â”‚
â”‚  â”‚    analyses í…Œì´ë¸” â”‚ chat_logs í…Œì´ë¸” â”‚ uploads/      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Image Pipeline (Computer Vision)                â”‚
â”‚  YOLOv8 Face Detection â†’ Gender/Age Classification          â”‚
â”‚                            â†“                                 â”‚
â”‚                    JSON Output (Single Source of Truth)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 LLM Module (GPT-4o-mini)                     â”‚
â”‚  JSON + Question â†’ Natural Language Answer                   â”‚
â”‚  âš ï¸ Hallucination ë°©ì§€: JSON ë°ì´í„°ë§Œ ì‚¬ìš©í•˜ì—¬ ë‹µë³€          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Backend
| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| **FastAPI** | REST API ì„œë²„ |
| **SQLAlchemy** | ORM (SQLite) |
| **OpenAI API** | GPT-4o-mini LLM |
| **Uvicorn** | ASGI ì„œë²„ |

### Computer Vision
| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| **YOLOv8** | ì–¼êµ´ ê°ì§€ |
| **ViT (Vision Transformer)** | ì„±ë³„/ë‚˜ì´ ë¶„ë¥˜ |
| **Hugging Face Transformers** | ëª¨ë¸ ë¡œë“œ |

### Frontend
| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| **React 18** | UI í”„ë ˆì„ì›Œí¬ |
| **Vite** | ë¹Œë“œ ë„êµ¬ |
| **Vanilla CSS** | ìŠ¤íƒ€ì¼ë§ |

---

## ğŸ“¦ ì„¤ì¹˜ ë°©ë²•

### ğŸ³ Dockerë¡œ ì‹¤í–‰ (ê¶Œì¥)

ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì…ë‹ˆë‹¤. Dockerë§Œ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©´ ë©ë‹ˆë‹¤.

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/Downy-newlearner/mlpa_faceAnalysisChatbot.git
cd mlpa_faceAnalysisChatbot

# 2. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ì—ì„œ OPENAI_API_KEY ìˆ˜ì •

# 3. Docker Composeë¡œ ì‹¤í–‰
docker-compose up --build

# 4. ì ‘ì†
# í”„ë¡ íŠ¸ì—”ë“œ: http://localhost:5173
# ë°±ì—”ë“œ API: http://localhost:8000/docs
```

### ğŸ’» ìˆ˜ë™ ì„¤ì¹˜

Docker ì—†ì´ ì§ì ‘ ì„¤ì¹˜í•˜ë ¤ë©´:

#### 1. ì €ì¥ì†Œ í´ë¡ 
```bash
git clone https://github.com/Downy-newlearner/mlpa_faceAnalysisChatbot.git
cd mlpa_faceAnalysisChatbot
```

#### 2. Python ì˜ì¡´ì„± ì„¤ì¹˜
```bash
# Python 3.11+ í•„ìš”
pip install -r requirements.txt
```

#### 3. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
```bash
cp .env.example .env
nano .env  # OPENAI_API_KEY ìˆ˜ì •
```

#### 4. í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì¹˜
```bash
cd frontend
npm install
cd ..
```

#### 5. ì„œë²„ ì‹¤í–‰
```bash
# í„°ë¯¸ë„ 1: ë°±ì—”ë“œ
uvicorn backend.main:app --host 0.0.0.0 --port 8000 --reload

# í„°ë¯¸ë„ 2: í”„ë¡ íŠ¸ì—”ë“œ
cd frontend && npm run dev
```

---

## ğŸš€ ì‚¬ìš©ë²•

### ì ‘ì†
- **í”„ë¡ íŠ¸ì—”ë“œ**: http://localhost:5173
- **ë°±ì—”ë“œ API ë¬¸ì„œ**: http://localhost:8000/docs

### ì›Œí¬í”Œë¡œìš°

1. ğŸ“· **ì´ë¯¸ì§€ ì—…ë¡œë“œ**: ë“œë˜ê·¸ì•¤ë“œë¡­ìœ¼ë¡œ ì´ë¯¸ì§€ ì—…ë¡œë“œ
2. ğŸ” **ë¶„ì„ ì‹œì‘**: ìë™ìœ¼ë¡œ ì–¼êµ´ ê°ì§€ ë° ë¶„ë¥˜ ì‹¤í–‰
3. ğŸ“Š **ê²°ê³¼ í™•ì¸**: ì„±ë³„/ì—°ë ¹ëŒ€ í†µê³„ ì‹œê°í™”
4. ğŸ’¬ **ì§ˆë¬¸í•˜ê¸°**: ìì—°ì–´ë¡œ ê²°ê³¼ì— ëŒ€í•´ ì§ˆë¬¸

### ì˜ˆì‹œ ì§ˆë¬¸
- "ë‚¨ë…€ ë¹„ìœ¨ì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?"
- "20ëŒ€ê°€ ëª‡ ëª…ì¸ê°€ìš”?"
- "ê°€ì¥ ë§ì€ ì—°ë ¹ëŒ€ëŠ”?"
- "ë¶„ì„ ê²°ê³¼ë¥¼ ìš”ì•½í•´ì£¼ì„¸ìš”"

---

## ğŸ“¡ API ë¬¸ì„œ

### ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| `POST` | `/api/upload` | ì´ë¯¸ì§€ ì—…ë¡œë“œ |
| `POST` | `/api/analyze/{analysis_id}` | ë¶„ì„ ì‹œì‘ |
| `GET` | `/api/result/{analysis_id}` | ë¶„ì„ ê²°ê³¼ ì¡°íšŒ |
| `POST` | `/api/chat` | LLM ì§ˆì˜ì‘ë‹µ |
| `GET` | `/api/history/{analysis_id}` | ì±„íŒ… íˆìŠ¤í† ë¦¬ ì¡°íšŒ |

### ìƒì„¸ API

#### ì´ë¯¸ì§€ ì—…ë¡œë“œ
```http
POST /api/upload
Content-Type: multipart/form-data

files: [image1.jpg, image2.jpg, ...]
```

**Response:**
```json
{
  "analysis_id": "uuid-string",
  "image_count": 2,
  "message": "Successfully uploaded 2 images."
}
```

#### ë¶„ì„ ê²°ê³¼
```http
GET /api/result/{analysis_id}
```

**Response:**
```json
{
  "analysis_id": "uuid-string",
  "status": "completed",
  "result": {
    "total_faces": 28,
    "gender": {
      "male": 23,
      "female": 5
    },
    "age_group": {
      "10s": 6,
      "20s": 22,
      "30s": 0,
      "40_plus": 0
    }
  }
}
```

#### ì±„íŒ…
```http
POST /api/chat
Content-Type: application/json

{
  "analysis_id": "uuid-string",
  "question": "ë‚¨ë…€ ë¹„ìœ¨ì€?"
}
```

**Response:**
```json
{
  "analysis_id": "uuid-string",
  "question": "ë‚¨ë…€ ë¹„ìœ¨ì€?",
  "answer": "ë¶„ì„ ê²°ê³¼ì— ë”°ë¥´ë©´ ì´ 28ëª… ì¤‘ ë‚¨ì„±ì´ 23ëª…(82.1%), ì—¬ì„±ì´ 5ëª…(17.9%)ì…ë‹ˆë‹¤."
}
```

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
mlpa_faceAnalysisChatbot/
â”œâ”€â”€ README.md                 # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â”œâ”€â”€ requirements.txt          # Python ì˜ì¡´ì„±
â”œâ”€â”€ docker-compose.yml        # Docker Compose ì„¤ì •
â”œâ”€â”€ Dockerfile.backend        # ë°±ì—”ë“œ Docker ì´ë¯¸ì§€
â”œâ”€â”€ Dockerfile.frontend       # í”„ë¡ íŠ¸ì—”ë“œ Docker ì´ë¯¸ì§€
â”œâ”€â”€ .env.example              # í™˜ê²½ë³€ìˆ˜ ìƒ˜í”Œ
â”‚
â”œâ”€â”€ backend/                  # FastAPI ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ main.py               # ì•± ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚   â”œâ”€â”€ config.py             # ì„¤ì • ê´€ë¦¬
â”‚   â”œâ”€â”€ database.py           # SQLite ëª¨ë¸
â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”œâ”€â”€ upload.py         # ì´ë¯¸ì§€ ì—…ë¡œë“œ API
â”‚   â”‚   â”œâ”€â”€ analyze.py        # ë¶„ì„ ì‹¤í–‰ API
â”‚   â”‚   â””â”€â”€ chat.py           # ì±—ë´‡ API
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ llm_service.py    # OpenAI GPT-4o-mini
â”‚   â”‚   â””â”€â”€ pipeline_service.py
â”‚   â””â”€â”€ schemas/
â”‚       â””â”€â”€ models.py         # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚
â”œâ”€â”€ frontend/                 # React í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ App.jsx
â”‚       â”œâ”€â”€ api/client.js
â”‚       â””â”€â”€ components/
â”‚           â”œâ”€â”€ ImageUploader.jsx
â”‚           â”œâ”€â”€ AnalysisResult.jsx
â”‚           â”œâ”€â”€ ChatInterface.jsx
â”‚           â””â”€â”€ HistorySidebar.jsx
â”‚
â”œâ”€â”€ image_pipeline/           # ì»´í“¨í„° ë¹„ì „ íŒŒì´í”„ë¼ì¸
â”‚   â””â”€â”€ image_pipeline.py
â”‚
â””â”€â”€ storage/                  # ë°ì´í„° ì €ì¥ì†Œ (ìë™ ìƒì„±)
    â”œâ”€â”€ database.db
    â””â”€â”€ uploads/
```

---

## ğŸ“ ë¼ì´ì„ ìŠ¤

MLPA í”„ë¡œì íŠ¸ Â© 2025

---

## ğŸ‘¤ ê°œë°œì

**Dahun Chung**  
ğŸ“§ jdh251425142514@gmail.com